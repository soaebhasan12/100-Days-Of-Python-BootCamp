<p>For the next challenge, carry over your existing code once again (by copy-pasting the entire cell) and make some modifications. </p><h4>Challenge</h4><p>Plot the search for "unemployment benefits" against the official unemployment rate.</p><ol><li><p>Change the title to: Monthly Search of "Unemployment Benefits" in the U.S. vs the U/E Rate</p></li><li><p>Change the y-axis label to: FRED U/E Rate</p></li><li><p>Change the axis limits</p></li><li><p>Add a grey <a href="https://matplotlib.org/3.2.1/api/_as_gen/matplotlib.pyplot.grid.html" rel="noopener noreferrer" target="_blank">grid</a> to the chart to better see the years and the U/E rate values. Use dashed lines for the line style. </p></li><li><p>Can you discern any seasonality in the searches? Is there a pattern?</p></li></ol><p>.</p><p>.</p><p>..</p><p>...</p><p>..</p><p>.</p><p>.</p><p><strong>Solution:&nbsp;Adding a grid to spot seasonality</strong></p><p>Ok, so there are relatively few changes you had to make here. Just the labels and the dataset we're using. The line of code I&nbsp;wanted you to figure out from the documentation was this one:</p><pre class="prettyprint linenums">ax1.grid(color='grey', linestyle='--')</pre><p>This overlays a grid of dashed lines, so that we get the following look:</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-10_11-11-06-9c85aa7e72108f10775949e685585d3e.png" style="width: 100%;"></figure><p>Notice how we can now clearly see the vertical dashed lines line up with spikes in searches for "Unemployment benefits". Many of the spikes are at year-end - in December. This clearly shows that there is seasonality in the job market. What else do we see?&nbsp;We see that the financial crisis in 2007/2008 caused a massive spike in unemployment. It took around 10 years (2007-2017) for the unemployment to reach the same level it had before the crisis. </p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-10_11-11-32-f521501ab3715056f21ed2265f229e3b.png" style="width: 100%;"></figure><p>Interestingly the big spike in searches for Unemployment benefits at the end of 2013 was not accompanied by a big increase in the unemployment rate. Something else must have been going on around that time. </p><p>Here's the full code for the cell:</p><pre class="prettyprint linenums">plt.figure(figsize=(14,8), dpi=120)
plt.title('Monthly Search of "Unemployment Benefits" in the U.S. vs the U/E Rate', fontsize=18)
plt.yticks(fontsize=14)
plt.xticks(fontsize=14, rotation=45)

ax1 = plt.gca()
ax2 = ax1.twinx()

ax1.set_ylabel('FRED U/E Rate', color='purple', fontsize=14)
ax2.set_ylabel('Search Trend', color='skyblue', fontsize=14)

ax1.xaxis.set_major_locator(years)
ax1.xaxis.set_major_formatter(years_fmt)
ax1.xaxis.set_minor_locator(months)

ax1.set_ylim(bottom=3, top=10.5)
ax1.set_xlim([df_unemployment.MONTH.min(), df_unemployment.MONTH.max()])

# Show the grid lines as dark grey lines
ax1.grid(color='grey', linestyle='--')

# Change the dataset used
ax1.plot(df_unemployment.MONTH, df_unemployment.UNRATE, 
         color='purple', linewidth=3, linestyle='--')
ax2.plot(df_unemployment.MONTH, df_unemployment.UE_BENEFITS_WEB_SEARCH, 
         color='skyblue', linewidth=3)

plt.show()</pre><p>The search volume moves around quite a bit - month on month. Perhaps we can smooth out the search volumes to get a slightly different picture (pun intended!). </p><p><br></p><h4>Challenge</h4><p>Calculate the 3-month or 6-month rolling average for the web searches. Plot the 6-month rolling average search data against the actual unemployment. What do you see? Which line moves first?</p><p><br></p><p><em>Hint</em>: Take a look at our prior lesson on Programming Languages where we smoothed out time-series data. </p><p><br></p><p>.</p><p>.</p><p>..</p><p>...</p><p>..</p><p>.</p><p>.</p><p><br></p><p><strong>Solution:&nbsp;Rolling Average</strong></p><p>You can create a rolling average using <code>.rolling()</code> and <code>.mean()</code> functions together. </p><pre class="prettyprint linenums">roll_df = df_unemployment[['UE_BENEFITS_WEB_SEARCH', 'UNRATE']].rolling(window=6).mean()</pre><p>Your plot should look something like this:</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-10_11-12-00-c00bc3f0680cf5782b5ca473f1beced6.png" style="width: 100%;"></figure><p>What is this telling us? We see that searches for "Unemployment Benefits" happen before the actual official unemployment rate goes up. Similarly, the search popularity for the term goes down before the unemployment rate decreases. In other words, these searches seem to act as a leading economic indicator for the unemployment rate (which is a lagging indicator). </p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-10_11-12-13-66757e8b039624b51ee60e4f8b4670a3.png" style="width: 100%;"></figure><p>Here's the full code for the cell:</p><pre class="prettyprint linenums">plt.figure(figsize=(14,8), dpi=120)
plt.title('Rolling Monthly US "Unemployment Benefits" Web Searches vs UNRATE', fontsize=18)
plt.yticks(fontsize=14)
plt.xticks(fontsize=14, rotation=45)

ax1 = plt.gca()
ax2 = ax1.twinx()

ax1.xaxis.set_major_locator(years)
ax1.xaxis.set_major_formatter(years_fmt)
ax1.xaxis.set_minor_locator(months)

ax1.set_ylabel('FRED U/E Rate', color='purple', fontsize=16)
ax2.set_ylabel('Search Trend', color='skyblue', fontsize=16)

ax1.set_ylim(bottom=3, top=10.5)
ax1.set_xlim([df_unemployment.MONTH[0], df_unemployment.MONTH.max()])

# Calculate the rolling average over a 6 month window
roll_df = df_unemployment[['UE_BENEFITS_WEB_SEARCH', 'UNRATE']].rolling(window=6).mean()

ax1.plot(df_unemployment.MONTH, roll_df.UNRATE, 'purple', linewidth=3, linestyle='-.')
ax2.plot(df_unemployment.MONTH, roll_df.UE_BENEFITS_WEB_SEARCH, 'skyblue', linewidth=3)

plt.show()</pre>