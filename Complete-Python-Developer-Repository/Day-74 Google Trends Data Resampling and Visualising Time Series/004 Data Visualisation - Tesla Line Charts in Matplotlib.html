<p>Let's create a basic line chart of the Tesla stock price and the search popularity and then gradually add more and more styling to our chart. </p><h4>Challenge</h4><p>Plot the Tesla stock price against the Tesla search volume using a line chart and two different axes. Here's what you're aiming for:</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-10_10-49-05-1179a1661d9c361d9c12017b41ec184d.png" style="width: 100%;"></figure><p><br></p><p>.</p><p>.</p><p>..</p><p>...</p><p>..</p><p>.</p><p>.</p><p><strong>Solution: Creating a basic chart</strong></p><p>This bit should pretty much be review from the previous days' lessons. To create a line plot with two different y-axes we first have to get the current axis and make a copy of it using <code>.twinx()</code>. Then we can configure each axis separately and call <code>.plot()</code>. </p><pre class="prettyprint linenums">ax1 = plt.gca() # get current axis
ax2 = ax1.twinx()

ax1.set_ylabel('TSLA Stock Price')
ax2.set_ylabel('Search Trend')

ax1.plot(df_tesla.MONTH, df_tesla.TSLA_USD_CLOSE)
ax2.plot(df_tesla.MONTH, df_tesla.TSLA_WEB_SEARCH)</pre><p><br></p><h4>Challenge</h4><p>Now let's style the chart a bit more. In particular, let's check out the different colours you can use with Matplotlib. </p><p>For our updated chart, let's differentiate the two lines and the axis labels using different colours. Try using one of the blue <a href="https://matplotlib.org/3.1.1/gallery/color/named_colors.html" rel="noopener noreferrer" target="_blank">colour names</a> for the search volume and a <a href="https://htmlcolorcodes.com/color-picker/" rel="noopener noreferrer" target="_blank">HEX code</a> for a red colour for the stock price. Here's what you're aiming for:</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-10_10-50-06-b58773f5e0d68af73e2f86ed98d2e0bb.png" style="width: 100%;"></figure><p><br></p><p>Hint: you can colour both the <a href="https://matplotlib.org/3.3.2/api/text_api.html#matplotlib.text.Text" rel="noopener noreferrer" target="_blank">axis labels</a> and the <a href="https://matplotlib.org/3.2.1/api/_as_gen/matplotlib.lines.Line2D.html#matplotlib.lines.Line2D" rel="noopener noreferrer" target="_blank">lines</a> on the chart using keyword arguments (kwargs).</p><p><br></p><p>.</p><p>.</p><p>..</p><p>...</p><p>..</p><p>.</p><p>.</p><p><br></p><p><strong>Solution:&nbsp;Adding colours</strong></p><p>Your code should now look something like this (with your own choice of colours of course): </p><pre class="prettyprint linenums">ax1 = plt.gca()
ax2 = ax1.twinx()

ax1.set_ylabel('TSLA Stock Price', color='#E6232E') # can use a HEX code
ax2.set_ylabel('Search Trend', color='skyblue') # or a named colour

ax1.plot(df_tesla.MONTH, df_tesla.TSLA_USD_CLOSE, color='#E6232E')
ax2.plot(df_tesla.MONTH, df_tesla.TSLA_WEB_SEARCH, color='skyblue')</pre><p><br></p><h4>Challenge</h4><p>There are still some ways to improve the look of this chart. First off, let's make it larger. Can you make the following changes:</p><ol><li><p>Increase the figure size (e.g., to 14 by 8).</p></li><li><p>Increase the font sizes for the labels and the ticks on the x-axis to 14.</p></li><li><p>Rotate the text on the x-axis by 45 degrees.</p></li><li><p>Add a title that reads 'Tesla Web Search vs Price'</p></li><li><p>Make the lines on the chart thicker.</p></li><li><p>Keep the chart looking sharp by changing the dots-per-inch or <a href="https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.pyplot.figure.html" rel="noopener noreferrer" target="_blank">DPI value</a>.</p></li><li><p>Set minimum and maximum values for the y and x-axis. Hint: check out methods like <a href="https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.axes.Axes.set_xlim.html" rel="noopener noreferrer" target="_blank">set_xlim()</a>.</p></li><li><p>Finally use <a href="https://matplotlib.org/3.2.1/api/_as_gen/matplotlib.pyplot.show.html" rel="noopener noreferrer" target="_blank">plt.show()</a> to display the chart below the cell instead of relying on the automatic notebook output.</p></li></ol><p>After the changes your chart should then look something like this:</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-10_10-51-19-f341cd2f3f750e5fa026ffc16ebe3cf0.png" style="width: 100%;"></figure><p>.</p><p>.</p><p>..</p><p>...</p><p>..</p><p>.</p><p>.</p><p><br></p><p><strong>Solution:&nbsp;Additional styling, increasing size &amp; resolution</strong></p><p>There's a couple of tweaks to the code going on here. First, we use <code>.figure()</code> to increase the size and resolution of our chart. Since we now have a bigger chart, we should also increase the font size of our labels and the thickness of our lines. </p><p>Finally, we are calling <code>.show()</code> to explicitly display the chart below the cell. This <code>.show()</code> method is important to be aware of if you're ever trying to generate charts in PyCharm or elsewhere outside of an interactive notebook like Google Colab or Jupyter. Also, it gives our notebook a very clean look.</p><pre class="prettyprint linenums"># increases size and resolution
plt.figure(figsize=(14,8), dpi=120) 
plt.title('Tesla Web Search vs Price', fontsize=18)

ax1 = plt.gca()
ax2 = ax1.twinx()

# Also, increase fontsize and linewidth for larger charts
ax1.set_ylabel('TSLA Stock Price', color='#E6232E', fontsize=14)
ax2.set_ylabel('Search Trend', color='skyblue', fontsize=14)

ax1.plot(df_tesla.MONTH, df_tesla.TSLA_USD_CLOSE, color='#E6232E', linewidth=3)
ax2.plot(df_tesla.MONTH, df_tesla.TSLA_WEB_SEARCH, color='skyblue', linewidth=3)

# Displays chart explicitly
plt.show()</pre><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-10_10-51-47-d5990af9c5e8865734f7cf3b9b148e7f.png" style="width: 100%;"></figure><p>Here's the code with rotation added to the x-ticks. With <code>.set_ylim()</code> and <code>.set_xlim()</code> you have precise control over which data you want to show on the chart. You can either choose hard values like displaying the Tesla stock price between $0 and $600. Or you could use the <code>.min()</code> and <code>.max()</code>&nbsp;functions to help you work out the bounds for the chart as well. </p><pre class="prettyprint linenums">plt.figure(figsize=(14,8), dpi=120)
plt.title('Tesla Web Search vs Price', fontsize=18)

# Increase the size and rotate the labels on the x-axis
plt.xticks(fontsize=14, rotation=45)

ax1 = plt.gca()
ax2 = ax1.twinx()

ax1.set_ylabel('TSLA Stock Price', color='#E6232E', fontsize=14)
ax2.set_ylabel('Search Trend', color='skyblue', fontsize=14)

# Set the minimum and maximum values on the axes
ax1.set_ylim([0, 600])
ax1.set_xlim([df_tesla.MONTH.min(), df_tesla.MONTH.max()])

ax1.plot(df_tesla.MONTH, df_tesla.TSLA_USD_CLOSE, color='#E6232E', linewidth=3)
ax2.plot(df_tesla.MONTH, df_tesla.TSLA_WEB_SEARCH, color='skyblue', linewidth=3)

plt.show()</pre><p><br></p><p><strong>Fix the Matplotlib Warning (if you see it)</strong></p><p>At this point, you might have seen this warning below from Matplotlib: </p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-10_10-53-19-7dbefe134f91b1ef45472f11e8c3897a.png" style="width: 100%;"></figure><p>This is not an error, but an FYI&nbsp;to be explicit about which datetime converter to use. We have a timeline on our x-axis after all. To address this simply follow the instructions in the warning message and add the following code:</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-10-10_10-53-10-163ce2a670fec6820f2670f1f577b98c.png" style="width: 100%;"></figure>